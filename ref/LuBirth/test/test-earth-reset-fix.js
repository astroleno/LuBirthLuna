chunk-RC3YDMAO.js?v=f528f50b:21551 Download the React DevTools for a better development experience: https://reactjs.org/link/react-devtools
main.tsx:10 [Main] React root created
main.tsx:12 [Main] App render called
SimpleTest.tsx:590 [LightInfo] Raw sunWorld: {x: 1, y: 0, z: 0}
SimpleTest.tsx:591 [LightInfo] Real sun angles from ephemeris: {azimuth: '0.0', altitude: '0.0'}
content.js:1286 [AeScape] 准备初始化悬浮球
content.js:33 [AeScape] 悬浮球系统初始化开始
content.js:146 [AeScape] URL检查: http://localhost:5173/?debug=1, 应排除: false
content.js:1328 [AeScape] 内容脚本已加载
ephemeris.ts:449 [toUTCFromLocal] 2025-09-07T01:27 (lon:121.5) -> UTC: 2025-09-06T17:27:00.000Z (offset: 8h)
ephemeris.ts:450 [toUTCFromLocal] 注意：UTC时间17:27 对应本地时间1:27
constants.ts:50 ✅ 天文常数验证通过
ephemeris.ts:449 [toUTCFromLocal] 2025-09-07T01:27 (lon:121.5) -> UTC: 2025-09-06T17:27:00.000Z (offset: 8h)
ephemeris.ts:450 [toUTCFromLocal] 注意：UTC时间17:27 对应本地时间1:27
App.tsx:7 [App] mounted - using SimpleTest scene
SimpleTest.tsx:590 [LightInfo] Raw sunWorld: {x: 0.13219090648427562, y: 0.11186998361780494, z: -0.9848911975483473}
SimpleTest.tsx:591 [LightInfo] Real sun angles from ephemeris: {azimuth: '35.4', altitude: '-46.0'}
content.js:157 [AeScape] 用户设置检查: false
textureLoader.ts:193 [TextureLoader] 开始加载纹理，配置: {useTextures: true, useClouds: true, useMilkyWay: true}
textureLoader.ts:193 [TextureLoader] 开始加载纹理，配置: {useTextures: true, useClouds: false, useMilkyWay: false}
textureLoader.ts:193 [TextureLoader] 开始加载纹理，配置: {useTextures: true, useClouds: false, useMilkyWay: false}
ephemeris.ts:449 [toUTCFromLocal] 2025-09-07T01:27 (lon:121.5) -> UTC: 2025-09-06T17:27:00.000Z (offset: 8h)
ephemeris.ts:450 [toUTCFromLocal] 注意：UTC时间17:27 对应本地时间1:27
moonPhase.ts:67 [getMoonPhase] 固定月球系统月相计算: {localISO: '2025-09-07T01:27', utc: '2025-09-06T17:27:00.000Z', elongationDeg: '166.4', sunLon_deg: '165.3', moonLon_deg: '-26.8', …}
Moon.tsx?t=1757179626313:151 [Moon Phase] 固定月球系统计算: {currentDate: '2025-09-07T01:27', observerLat: 31.2, observerLon: 121.5, gamma_deg: '166.4°', renderSunDirection: Array(3), …}
Moon.tsx?t=1757179626313:206 [Moon Phase] 真实向量太阳方向计算完成: {currentDate: '2025-09-07T01:27', observerLat: 31.2, observerLon: 121.5, sunDirection: Array(3), positionAngle: '-12.1°', …}
Moon.tsx?t=1757179626313:222 === 真实向量太阳方向信息 ===
Moon.tsx?t=1757179626313:223 太阳方向: (3) ['0.210', '0.000', '0.978']
Moon.tsx?t=1757179626313:224 位置角: -12.1°
Moon.tsx?t=1757179626313:225 光照侧（基于真实向量）: 后方（满月）
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/8k_earth_daymap.jpg
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/8k_earth_nightmap.jpg
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/8k_earth_normal_map.jpg
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/8k_earth_specular_map.jpg
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/8k_moon.jpg
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/2k_moon_normal.jpg
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/2k_moon_displacement.jpg
textureLoader.ts:216 [TextureLoader] 纹理加载状态: {earthMap: '❌', earthNight: '❌', earthNormal: '❌', earthSpecular: '❌', earthClouds: '❌', …}
Earth.tsx:210 [SimpleEarth] {position: Array(3), size: 2.0503571337468207, lightDirection: Array(3), useTextures: true, hasDayMap: false, …}
AtmosphereEffects.tsx:88 [SimpleAtmosphere] {earthSize: 2.0503571337468207, earthY: 0, rimStrength: 0.15, rimWidth: 0.08, earthGlowStrength: 0.8, …}
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/8k_earth_daymap.jpg
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/8k_earth_nightmap.jpg
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/8k_earth_normal_map.jpg
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/8k_earth_specular_map.jpg
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/8k_moon.jpg
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/2k_moon_normal.jpg
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/2k_moon_displacement.jpg
textureLoader.ts:216 [TextureLoader] 纹理加载状态: {earthMap: '❌', earthNight: '❌', earthNormal: '❌', earthSpecular: '❌', earthClouds: '❌', …}
Moon.tsx?t=1757179626313:498 [SimpleMoon Debug] {position: Array(3), radius: 0.44, lightDirection: Array(3), useTextures: true, hasMap: false, …}
Moon.tsx?t=1757179626313:549 [SimpleMoon Lighting Analysis] {sunDirection: Array(3), x: '0.210', y: '0.000', z: '0.978', positionAngleChi: '-12.1°', …}
positionUtils.ts:112 [SimpleCamera] Error: ReferenceError: azDeg is not defined
    at positionUtils.ts:105:11
    at commitHookEffectListMount (chunk-F5XGK2DS.js?v=f528f50b:10911:34)
    at commitPassiveMountOnFiber (chunk-F5XGK2DS.js?v=f528f50b:12219:19)
    at commitPassiveMountEffects_complete (chunk-F5XGK2DS.js?v=f528f50b:12191:17)
    at commitPassiveMountEffects_begin (chunk-F5XGK2DS.js?v=f528f50b:12181:15)
    at commitPassiveMountEffects (chunk-F5XGK2DS.js?v=f528f50b:12171:11)
    at flushPassiveEffectsImpl (chunk-F5XGK2DS.js?v=f528f50b:13939:11)
    at flushPassiveEffects (chunk-F5XGK2DS.js?v=f528f50b:13902:22)
    at performSyncWorkOnRoot (chunk-F5XGK2DS.js?v=f528f50b:13305:11)
    at flushSyncCallbacks (chunk-F5XGK2DS.js?v=f528f50b:2766:30)
console.error @ chunk-F5XGK2DS.js?v=f528f50b:17705
(anonymous) @ positionUtils.ts:112
commitHookEffectListMount @ chunk-F5XGK2DS.js?v=f528f50b:10911
commitPassiveMountOnFiber @ chunk-F5XGK2DS.js?v=f528f50b:12219
commitPassiveMountEffects_complete @ chunk-F5XGK2DS.js?v=f528f50b:12191
commitPassiveMountEffects_begin @ chunk-F5XGK2DS.js?v=f528f50b:12181
commitPassiveMountEffects @ chunk-F5XGK2DS.js?v=f528f50b:12171
flushPassiveEffectsImpl @ chunk-F5XGK2DS.js?v=f528f50b:13939
flushPassiveEffects @ chunk-F5XGK2DS.js?v=f528f50b:13902
performSyncWorkOnRoot @ chunk-F5XGK2DS.js?v=f528f50b:13305
flushSyncCallbacks @ chunk-F5XGK2DS.js?v=f528f50b:2766
commitRootImpl @ chunk-F5XGK2DS.js?v=f528f50b:13887
commitRoot @ chunk-F5XGK2DS.js?v=f528f50b:13743
finishConcurrentRender @ chunk-F5XGK2DS.js?v=f528f50b:13242
performConcurrentWorkOnRoot @ chunk-F5XGK2DS.js?v=f528f50b:13155
workLoop @ chunk-F5XGK2DS.js?v=f528f50b:274
flushWork @ chunk-F5XGK2DS.js?v=f528f50b:253
performWorkUntilDeadline @ chunk-F5XGK2DS.js?v=f528f50b:461
positionUtils.ts:223 [SimpleExposure] {exposure: 1}
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/8k_earth_daymap.jpg
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/8k_earth_nightmap.jpg
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/8k_earth_normal_map.jpg
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/8k_earth_specular_map.jpg
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/8k_earth_clouds.jpg
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/8k_moon.jpg
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/2k_moon_normal.jpg
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/2k_moon_displacement.jpg
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/8k_stars_milky_way.jpg
textureLoader.ts:216 [TextureLoader] 纹理加载状态: {earthMap: '❌', earthNight: '❌', earthNormal: '❌', earthSpecular: '❌', earthClouds: '❌', …}
textureLoader.ts:193 [TextureLoader] 开始加载纹理，配置: {useTextures: true, useClouds: true, useMilkyWay: true}
textureLoader.ts:193 [TextureLoader] 开始加载纹理，配置: {useTextures: true, useClouds: false, useMilkyWay: false}
textureLoader.ts:193 [TextureLoader] 开始加载纹理，配置: {useTextures: true, useClouds: false, useMilkyWay: false}
Earth.tsx:210 [SimpleEarth] {position: Array(3), size: 2.0503571337468207, lightDirection: Array(3), useTextures: true, hasDayMap: false, …}
Moon.tsx?t=1757179626313:498 [SimpleMoon Debug] {position: Array(3), radius: 0.44, lightDirection: Array(3), useTextures: true, hasMap: false, …}
Moon.tsx?t=1757179626313:549 [SimpleMoon Lighting Analysis] {sunDirection: Array(3), x: '0.210', y: '0.000', z: '0.978', positionAngleChi: '-12.1°', …}
textureLoader.ts:193 [TextureLoader] 开始加载纹理，配置: {useTextures: true, useClouds: false, useMilkyWay: false}
textureLoader.ts:193 [TextureLoader] 开始加载纹理，配置: {useTextures: true, useClouds: false, useMilkyWay: false}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/8k_earth_nightmap.jpg {width: 8192, height: 4096, src: 'http://localhost:5173/textures/8k_earth_nightmap.jpg'}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/8k_earth_nightmap.jpg {width: 8192, height: 4096, src: 'http://localhost:5173/textures/8k_earth_nightmap.jpg'}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/8k_earth_nightmap.jpg {width: 8192, height: 4096, src: 'http://localhost:5173/textures/8k_earth_nightmap.jpg'}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/8k_earth_specular_map.jpg {width: 8192, height: 4096, src: 'http://localhost:5173/textures/8k_earth_specular_map.jpg'}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/8k_earth_specular_map.jpg {width: 8192, height: 4096, src: 'http://localhost:5173/textures/8k_earth_specular_map.jpg'}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/8k_earth_specular_map.jpg {width: 8192, height: 4096, src: 'http://localhost:5173/textures/8k_earth_specular_map.jpg'}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/2k_moon_normal.jpg {width: 2048, height: 1024, src: 'http://localhost:5173/textures/2k_moon_normal.jpg'}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/2k_moon_normal.jpg {width: 2048, height: 1024, src: 'http://localhost:5173/textures/2k_moon_normal.jpg'}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/2k_moon_normal.jpg {width: 2048, height: 1024, src: 'http://localhost:5173/textures/2k_moon_normal.jpg'}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/8k_earth_daymap.jpg {width: 8192, height: 4096, src: 'http://localhost:5173/textures/8k_earth_daymap.jpg'}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/8k_earth_daymap.jpg {width: 8192, height: 4096, src: 'http://localhost:5173/textures/8k_earth_daymap.jpg'}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/8k_earth_daymap.jpg {width: 8192, height: 4096, src: 'http://localhost:5173/textures/8k_earth_daymap.jpg'}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/8k_earth_normal_map.jpg {width: 8192, height: 4096, src: 'http://localhost:5173/textures/8k_earth_normal_map.jpg'}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/8k_earth_normal_map.jpg {width: 8192, height: 4096, src: 'http://localhost:5173/textures/8k_earth_normal_map.jpg'}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/8k_earth_normal_map.jpg {width: 8192, height: 4096, src: 'http://localhost:5173/textures/8k_earth_normal_map.jpg'}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/2k_moon_displacement.jpg {width: 2048, height: 1024, src: 'http://localhost:5173/textures/2k_moon_displacement.jpg'}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/2k_moon_displacement.jpg {width: 2048, height: 1024, src: 'http://localhost:5173/textures/2k_moon_displacement.jpg'}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/2k_moon_displacement.jpg {width: 2048, height: 1024, src: 'http://localhost:5173/textures/2k_moon_displacement.jpg'}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/8k_stars_milky_way.jpg {width: 8192, height: 4096, src: 'http://localhost:5173/textures/8k_stars_milky_way.jpg'}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/8k_moon.jpg {width: 8192, height: 4096, src: 'http://localhost:5173/textures/8k_moon.jpg'}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/8k_moon.jpg {width: 8192, height: 4096, src: 'http://localhost:5173/textures/8k_moon.jpg'}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/8k_moon.jpg {width: 8192, height: 4096, src: 'http://localhost:5173/textures/8k_moon.jpg'}
textureLoader.ts:193 [TextureLoader] 开始加载纹理，配置: {useTextures: true, useClouds: true, useMilkyWay: true}
textureLoader.ts:193 [TextureLoader] 开始加载纹理，配置: {useTextures: true, useClouds: false, useMilkyWay: false}
textureLoader.ts:193 [TextureLoader] 开始加载纹理，配置: {useTextures: true, useClouds: false, useMilkyWay: false}
Moon.tsx?t=1757179626313:257 [Moon Material] Using custom ShaderMaterial with UV rotation
textureLoader.ts:216 [TextureLoader] 纹理加载状态: {earthMap: '✅', earthNight: '✅', earthNormal: '✅', earthSpecular: '✅', earthClouds: '❌', …}
Earth.tsx:210 [SimpleEarth] {position: Array(3), size: 2.0503571337468207, lightDirection: Array(3), useTextures: true, hasDayMap: true, …}
textureLoader.ts:216 [TextureLoader] 纹理加载状态: {earthMap: '✅', earthNight: '✅', earthNormal: '✅', earthSpecular: '✅', earthClouds: '❌', …}
Moon.tsx?t=1757179626313:498 [SimpleMoon Debug] {position: Array(3), radius: 0.44, lightDirection: Array(3), useTextures: true, hasMap: true, …}
Moon.tsx?t=1757179626313:549 [SimpleMoon Lighting Analysis] {sunDirection: Array(3), x: '0.210', y: '0.000', z: '0.978', positionAngleChi: '-12.1°', …}
SimpleTest.tsx:35 [MilkyWay] texture loaded: {image: 'http://localhost:5173/textures/8k_stars_milky_way.jpg', repeat: Array(2), yawDeg: -61, pitchDeg: 0, sphereRadius: 120, …}
textureLoader.ts:216 [TextureLoader] 纹理加载状态: {earthMap: '✅', earthNight: '✅', earthNormal: '✅', earthSpecular: '✅', earthClouds: '❌', …}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/8k_earth_clouds.jpg {width: 8192, height: 4096, src: 'http://localhost:5173/textures/8k_earth_clouds.jpg'}
textureLoader.ts:193 [TextureLoader] 开始加载纹理，配置: {useTextures: true, useClouds: true, useMilkyWay: true}
textureLoader.ts:193 [TextureLoader] 开始加载纹理，配置: {useTextures: true, useClouds: false, useMilkyWay: false}
textureLoader.ts:193 [TextureLoader] 开始加载纹理，配置: {useTextures: true, useClouds: false, useMilkyWay: false}
Moon.tsx?t=1757179626313:257 [Moon Material] Using custom ShaderMaterial with UV rotation
Earth.tsx:210 [SimpleEarth] {position: Array(3), size: 2.0503571337468207, lightDirection: Array(3), useTextures: true, hasDayMap: true, …}
Clouds.tsx:162 [SimpleClouds] {radius: 2.0680000468112856, position: Array(3), yawDeg: 0, pitchDeg: 0, lightDir: Array(3), …}
Moon.tsx?t=1757179626313:498 [SimpleMoon Debug] {position: Array(3), radius: 0.44, lightDirection: Array(3), useTextures: true, hasMap: true, …}
Moon.tsx?t=1757179626313:549 [SimpleMoon Lighting Analysis] {sunDirection: Array(3), x: '0.210', y: '0.000', z: '0.978', positionAngleChi: '-12.1°', …}
textureLoader.ts:216 [TextureLoader] 纹理加载状态: {earthMap: '✅', earthNight: '✅', earthNormal: '✅', earthSpecular: '✅', earthClouds: '✅', …}
content.js:1967 Preloaded 316 local cards to cache
content.js:2110 Starting periodic update mechanism...
content.js:2122 Periodic update started with 180s interval
content.js:1972 Force preloading more content...
content.js:1995 Force preloading quotes: 6 cards needed
content.js:1995 Force preloading facts: 8 cards needed
content.js:1995 Force preloading advice: 8 cards needed
content.js:1995 Force preloading catfacts: 7 cards needed
content.js:1995 Force preloading cocktails: 11 cards needed
textureLoader.ts:193 [TextureLoader] 开始加载纹理，配置: {useTextures: true, useClouds: true, useMilkyWay: true}
textureLoader.ts:193 [TextureLoader] 开始加载纹理，配置: {useTextures: true, useClouds: false, useMilkyWay: false}
textureLoader.ts:193 [TextureLoader] 开始加载纹理，配置: {useTextures: true, useClouds: false, useMilkyWay: false}
Moon.tsx?t=1757179626313:257 [Moon Material] Using custom ShaderMaterial with UV rotation
Earth.tsx:210 [SimpleEarth] {position: Array(3), size: 2.0503571337468207, lightDirection: Array(3), useTextures: true, hasDayMap: true, …}
Clouds.tsx:162 [SimpleClouds] {radius: 2.0680000468112856, position: Array(3), yawDeg: 0, pitchDeg: 0, lightDir: Array(3), …}
Moon.tsx?t=1757179626313:498 [SimpleMoon Debug] {position: Array(3), radius: 0.44, lightDirection: Array(3), useTextures: true, hasMap: true, …}
Moon.tsx?t=1757179626313:549 [SimpleMoon Lighting Analysis] {sunDirection: Array(3), x: '0.210', y: '0.000', z: '0.978', positionAngleChi: '-12.1°', …}
positionUtils.ts:51 [BirthPointAlignment] {params: {…}, orientation: {…}, position: Array(3), quaternion: Array(4)}
positionUtils.ts:112 [SimpleCamera] Error: ReferenceError: azDeg is not defined
    at positionUtils.ts:105:11
    at commitHookEffectListMount (chunk-F5XGK2DS.js?v=f528f50b:10911:34)
    at commitPassiveMountOnFiber (chunk-F5XGK2DS.js?v=f528f50b:12219:19)
    at commitPassiveMountEffects_complete (chunk-F5XGK2DS.js?v=f528f50b:12191:17)
    at commitPassiveMountEffects_begin (chunk-F5XGK2DS.js?v=f528f50b:12181:15)
    at commitPassiveMountEffects (chunk-F5XGK2DS.js?v=f528f50b:12171:11)
    at flushPassiveEffectsImpl (chunk-F5XGK2DS.js?v=f528f50b:13939:11)
    at flushPassiveEffects (chunk-F5XGK2DS.js?v=f528f50b:13902:22)
    at commitRootImpl (chunk-F5XGK2DS.js?v=f528f50b:13871:13)
    at commitRoot (chunk-F5XGK2DS.js?v=f528f50b:13743:13)
console.error @ chunk-F5XGK2DS.js?v=f528f50b:17705
(anonymous) @ positionUtils.ts:112
commitHookEffectListMount @ chunk-F5XGK2DS.js?v=f528f50b:10911
commitPassiveMountOnFiber @ chunk-F5XGK2DS.js?v=f528f50b:12219
commitPassiveMountEffects_complete @ chunk-F5XGK2DS.js?v=f528f50b:12191
commitPassiveMountEffects_begin @ chunk-F5XGK2DS.js?v=f528f50b:12181
commitPassiveMountEffects @ chunk-F5XGK2DS.js?v=f528f50b:12171
flushPassiveEffectsImpl @ chunk-F5XGK2DS.js?v=f528f50b:13939
flushPassiveEffects @ chunk-F5XGK2DS.js?v=f528f50b:13902
commitRootImpl @ chunk-F5XGK2DS.js?v=f528f50b:13871
commitRoot @ chunk-F5XGK2DS.js?v=f528f50b:13743
performSyncWorkOnRoot @ chunk-F5XGK2DS.js?v=f528f50b:13332
flushSyncCallbacks @ chunk-F5XGK2DS.js?v=f528f50b:2766
workLoop @ chunk-F5XGK2DS.js?v=f528f50b:274
flushWork @ chunk-F5XGK2DS.js?v=f528f50b:253
performWorkUntilDeadline @ chunk-F5XGK2DS.js?v=f528f50b:461
textureLoader.ts:193 [TextureLoader] 开始加载纹理，配置: {useTextures: true, useClouds: false, useMilkyWay: false}
ephemeris.ts:449 [toUTCFromLocal] 2025-09-07T01:27 (lon:121.5) -> UTC: 2025-09-06T17:27:00.000Z (offset: 8h)
ephemeris.ts:450 [toUTCFromLocal] 注意：UTC时间17:27 对应本地时间1:27
moonPhase.ts:67 [getMoonPhase] 固定月球系统月相计算: {localISO: '2025-09-07T01:27', utc: '2025-09-06T17:27:00.000Z', elongationDeg: '166.4', sunLon_deg: '165.3', moonLon_deg: '-26.8', …}
Moon.tsx:196 [Moon Phase] 固定月球系统计算: {currentDate: '2025-09-07T01:27', observerLat: 31.2, observerLon: 121.5, gamma_deg: '166.4°', renderSunDirection: Array(3), …}
Moon.tsx:259 [Moon Phase] 真实向量太阳方向计算完成: {currentDate: '2025-09-07T01:27', observerLat: 31.2, observerLon: 121.5, sunDirection: Array(3), positionAngle: '-12.1°', …}
Moon.tsx:279 === 真实向量太阳方向信息 ===
Moon.tsx:280 太阳方向: (3) ['0.210', '0.000', '0.978']
Moon.tsx:281 位置角: -12.1°
Moon.tsx:282 光照侧（基于真实向量）: 后方（满月）
Moon.tsx:324 [Moon Material] Using custom ShaderMaterial with UV rotation
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/8k_earth_daymap.jpg
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/8k_earth_nightmap.jpg
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/8k_earth_normal_map.jpg
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/8k_earth_specular_map.jpg
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/8k_moon.jpg
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/2k_moon_normal.jpg
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/2k_moon_displacement.jpg
textureLoader.ts:216 [TextureLoader] 纹理加载状态: {earthMap: '✅', earthNight: '✅', earthNormal: '✅', earthSpecular: '✅', earthClouds: '❌', …}
Moon.tsx:596 [SimpleMoon Debug] {position: Array(3), radius: 0.44, lightDirection: Array(3), useTextures: true, hasMap: true, …}
Moon.tsx:658 [SimpleMoon Lighting Analysis] {sunDirection: Array(3), x: '0.210', y: '0.000', z: '0.978', positionAngleChi: '-12.1°', …}
textureLoader.ts:193 [TextureLoader] 开始加载纹理，配置: {useTextures: true, useClouds: false, useMilkyWay: false}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/8k_earth_daymap.jpg {width: 8192, height: 4096, src: 'http://localhost:5173/textures/8k_earth_daymap.jpg'}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/8k_earth_nightmap.jpg {width: 8192, height: 4096, src: 'http://localhost:5173/textures/8k_earth_nightmap.jpg'}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/8k_earth_normal_map.jpg {width: 8192, height: 4096, src: 'http://localhost:5173/textures/8k_earth_normal_map.jpg'}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/8k_earth_specular_map.jpg {width: 8192, height: 4096, src: 'http://localhost:5173/textures/8k_earth_specular_map.jpg'}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/8k_moon.jpg {width: 8192, height: 4096, src: 'http://localhost:5173/textures/8k_moon.jpg'}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/2k_moon_normal.jpg {width: 2048, height: 1024, src: 'http://localhost:5173/textures/2k_moon_normal.jpg'}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/2k_moon_displacement.jpg {width: 2048, height: 1024, src: 'http://localhost:5173/textures/2k_moon_displacement.jpg'}
textureLoader.ts:193 [TextureLoader] 开始加载纹理，配置: {useTextures: true, useClouds: false, useMilkyWay: false}
Moon.tsx:324 [Moon Material] Using custom ShaderMaterial with UV rotation
textureLoader.ts:216 [TextureLoader] 纹理加载状态: {earthMap: '✅', earthNight: '✅', earthNormal: '✅', earthSpecular: '✅', earthClouds: '❌', …}
Moon.tsx:596 [SimpleMoon Debug] {position: Array(3), radius: 0.44, lightDirection: Array(3), useTextures: true, hasMap: true, …}
Moon.tsx:658 [SimpleMoon Lighting Analysis] {sunDirection: Array(3), x: '0.210', y: '0.000', z: '0.978', positionAngleChi: '-12.1°', …}
content.js:1995 Force preloading datafacts: 25 cards needed
content.js:1995 Force preloading gathas: 15 cards needed
content.js:2024 Force preload completed. Total cache size: 370
textureLoader.ts:193 [TextureLoader] 开始加载纹理，配置: {useTextures: true, useClouds: false, useMilkyWay: false}
ephemeris.ts:449 [toUTCFromLocal] 2025-09-07T01:27 (lon:121.5) -> UTC: 2025-09-06T17:27:00.000Z (offset: 8h)
ephemeris.ts:450 [toUTCFromLocal] 注意：UTC时间17:27 对应本地时间1:27
moonPhase.ts:67 [getMoonPhase] 固定月球系统月相计算: {localISO: '2025-09-07T01:27', utc: '2025-09-06T17:27:00.000Z', elongationDeg: '166.4', sunLon_deg: '165.3', moonLon_deg: '-26.8', …}
Moon.tsx:196 [Moon Phase] 固定月球系统计算: {currentDate: '2025-09-07T01:27', observerLat: 31.2, observerLon: 121.5, gamma_deg: '166.4°', renderSunDirection: Array(3), …}
Moon.tsx:259 [Moon Phase] 真实向量太阳方向计算完成: {currentDate: '2025-09-07T01:27', observerLat: 31.2, observerLon: 121.5, sunDirection: Array(3), positionAngle: '-12.1°', …}
Moon.tsx:279 === 真实向量太阳方向信息 ===
Moon.tsx:280 太阳方向: (3) ['0.210', '0.000', '0.978']
Moon.tsx:281 位置角: -12.1°
Moon.tsx:282 光照侧（基于真实向量）: 后方（满月）
Moon.tsx:324 [Moon Material] Using custom ShaderMaterial with UV rotation
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/8k_earth_daymap.jpg
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/8k_earth_nightmap.jpg
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/8k_earth_normal_map.jpg
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/8k_earth_specular_map.jpg
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/8k_moon.jpg
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/2k_moon_normal.jpg
textureLoader.ts:77 [TextureLoader] 尝试加载纹理: /textures/2k_moon_displacement.jpg
textureLoader.ts:216 [TextureLoader] 纹理加载状态: {earthMap: '✅', earthNight: '✅', earthNormal: '✅', earthSpecular: '✅', earthClouds: '❌', …}
Moon.tsx:596 [SimpleMoon Debug] {position: Array(3), radius: 0.44, lightDirection: Array(3), useTextures: true, hasMap: true, …}
Moon.tsx:658 [SimpleMoon Lighting Analysis] {sunDirection: Array(3), x: '0.210', y: '0.000', z: '0.978', positionAngleChi: '-12.1°', …}
textureLoader.ts:193 [TextureLoader] 开始加载纹理，配置: {useTextures: true, useClouds: false, useMilkyWay: false}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/8k_earth_daymap.jpg {width: 8192, height: 4096, src: 'http://localhost:5173/textures/8k_earth_daymap.jpg'}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/8k_earth_nightmap.jpg {width: 8192, height: 4096, src: 'http://localhost:5173/textures/8k_earth_nightmap.jpg'}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/8k_earth_normal_map.jpg {width: 8192, height: 4096, src: 'http://localhost:5173/textures/8k_earth_normal_map.jpg'}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/8k_earth_specular_map.jpg {width: 8192, height: 4096, src: 'http://localhost:5173/textures/8k_earth_specular_map.jpg'}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/8k_moon.jpg {width: 8192, height: 4096, src: 'http://localhost:5173/textures/8k_moon.jpg'}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/2k_moon_normal.jpg {width: 2048, height: 1024, src: 'http://localhost:5173/textures/2k_moon_normal.jpg'}
textureLoader.ts:83 [TextureLoader] ✅ 纹理加载成功: /textures/2k_moon_displacement.jpg {width: 2048, height: 1024, src: 'http://localhost:5173/textures/2k_moon_displacement.jpg'}
textureLoader.ts:193 [TextureLoader] 开始加载纹理，配置: {useTextures: true, useClouds: false, useMilkyWay: false}
Moon.tsx:324 [Moon Material] Using custom ShaderMaterial with UV rotation
textureLoader.ts:216 [TextureLoader] 纹理加载状态: {earthMap: '✅', earthNight: '✅', earthNormal: '✅', earthSpecular: '✅', earthClouds: '❌', …}
Moon.tsx:596 [SimpleMoon Debug] {position: Array(3), radius: 0.44, lightDirection: Array(3), useTextures: true, hasMap: true, …}
Moon.tsx:658 [SimpleMoon Lighting Analysis] {sunDirection: Array(3), x: '0.210', y: '0.000', z: '0.978', positionAngleChi: '-12.1°', …}
textureLoader.ts:193 [TextureLoader] 开始加载纹理，配置: {useTextures: true, useClouds: true, useMilkyWay: true}
textureLoader.ts:193 [TextureLoader] 开始加载纹理，配置: {useTextures: true, useClouds: false, useMilkyWay: false}
textureLoader.ts:193 [TextureLoader] 开始加载纹理，配置: {useTextures: true, useClouds: false, useMilkyWay: false}
Moon.tsx:324 [Moon Material] Using custom ShaderMaterial with UV rotation
Earth.tsx:210 [SimpleEarth] {position: Array(3), size: 2.0503571337468207, lightDirection: Array(3), useTextures: true, hasDayMap: true, …}
Clouds.tsx:162 [SimpleClouds] {radius: 2.0680000468112856, position: Array(3), yawDeg: 0, pitchDeg: 0, lightDir: Array(3), …}
Moon.tsx:596 [SimpleMoon Debug] {position: Array(3), radius: 0.44, lightDirection: Array(3), useTextures: true, hasMap: true, …}
Moon.tsx:658 [SimpleMoon Lighting Analysis] {sunDirection: Array(3), x: '0.210', y: '0.000', z: '0.978', positionAngleChi: '-12.1°', …}
positionUtils.ts:112 [SimpleCamera] Error: ReferenceError: azDeg is not defined
    at positionUtils.ts:105:11
    at commitHookEffectListMount (chunk-F5XGK2DS.js?v=f528f50b:10911:34)
    at commitPassiveMountOnFiber (chunk-F5XGK2DS.js?v=f528f50b:12219:19)
    at commitPassiveMountEffects_complete (chunk-F5XGK2DS.js?v=f528f50b:12191:17)
    at commitPassiveMountEffects_begin (chunk-F5XGK2DS.js?v=f528f50b:12181:15)
    at commitPassiveMountEffects (chunk-F5XGK2DS.js?v=f528f50b:12171:11)
    at flushPassiveEffectsImpl (chunk-F5XGK2DS.js?v=f528f50b:13939:11)
    at flushPassiveEffects (chunk-F5XGK2DS.js?v=f528f50b:13902:22)
    at commitRootImpl (chunk-F5XGK2DS.js?v=f528f50b:13871:13)
    at commitRoot (chunk-F5XGK2DS.js?v=f528f50b:13743:13)
console.error @ chunk-F5XGK2DS.js?v=f528f50b:17705
(anonymous) @ positionUtils.ts:112
commitHookEffectListMount @ chunk-F5XGK2DS.js?v=f528f50b:10911
commitPassiveMountOnFiber @ chunk-F5XGK2DS.js?v=f528f50b:12219
commitPassiveMountEffects_complete @ chunk-F5XGK2DS.js?v=f528f50b:12191
commitPassiveMountEffects_begin @ chunk-F5XGK2DS.js?v=f528f50b:12181
commitPassiveMountEffects @ chunk-F5XGK2DS.js?v=f528f50b:12171
flushPassiveEffectsImpl @ chunk-F5XGK2DS.js?v=f528f50b:13939
flushPassiveEffects @ chunk-F5XGK2DS.js?v=f528f50b:13902
commitRootImpl @ chunk-F5XGK2DS.js?v=f528f50b:13871
commitRoot @ chunk-F5XGK2DS.js?v=f528f50b:13743
performSyncWorkOnRoot @ chunk-F5XGK2DS.js?v=f528f50b:13332
flushSyncCallbacks @ chunk-F5XGK2DS.js?v=f528f50b:2766
workLoop @ chunk-F5XGK2DS.js?v=f528f50b:274
flushWork @ chunk-F5XGK2DS.js?v=f528f50b:253
performWorkUntilDeadline @ chunk-F5XGK2DS.js?v=f528f50b:461
textureLoader.ts:193 [TextureLoader] 开始加载纹理，配置: {useTextures: true, useClouds: true, useMilkyWay: true}
textureLoader.ts:193 [TextureLoader] 开始加载纹理，配置: {useTextures: true, useClouds: false, useMilkyWay: false}
textureLoader.ts:193 [TextureLoader] 开始加载纹理，配置: {useTextures: true, useClouds: false, useMilkyWay: false}
Moon.tsx:324 [Moon Material] Using custom ShaderMaterial with UV rotation
Earth.tsx:210 [SimpleEarth] {position: Array(3), size: 2.0503571337468207, lightDirection: Array(3), useTextures: true, hasDayMap: true, …}
Clouds.tsx:162 [SimpleClouds] {radius: 2.0680000468112856, position: Array(3), yawDeg: 0, pitchDeg: 0, lightDir: Array(3), …}
Moon.tsx:596 [SimpleMoon Debug] {position: Array(3), radius: 0.44, lightDirection: Array(3), useTextures: true, hasMap: true, …}
Moon.tsx:658 [SimpleMoon Lighting Analysis] {sunDirection: Array(3), x: '0.210', y: '0.000', z: '0.978', positionAngleChi: '-12.1°', …}
positionUtils.ts:51 [BirthPointAlignment] {params: {…}, orientation: {…}, position: Array(3), quaternion: Array(4)}
positionUtils.ts:112 [SimpleCamera] Error: ReferenceError: azDeg is not defined
    at positionUtils.ts:105:11
    at commitHookEffectListMount (chunk-F5XGK2DS.js?v=f528f50b:10911:34)
    at commitPassiveMountOnFiber (chunk-F5XGK2DS.js?v=f528f50b:12219:19)
    at commitPassiveMountEffects_complete (chunk-F5XGK2DS.js?v=f528f50b:12191:17)
    at commitPassiveMountEffects_begin (chunk-F5XGK2DS.js?v=f528f50b:12181:15)
    at commitPassiveMountEffects (chunk-F5XGK2DS.js?v=f528f50b:12171:11)
    at flushPassiveEffectsImpl (chunk-F5XGK2DS.js?v=f528f50b:13939:11)
    at flushPassiveEffects (chunk-F5XGK2DS.js?v=f528f50b:13902:22)
    at commitRootImpl (chunk-F5XGK2DS.js?v=f528f50b:13871:13)
    at commitRoot (chunk-F5XGK2DS.js?v=f528f50b:13743:13)
console.error @ chunk-F5XGK2DS.js?v=f528f50b:17705
(anonymous) @ positionUtils.ts:112
commitHookEffectListMount @ chunk-F5XGK2DS.js?v=f528f50b:10911
commitPassiveMountOnFiber @ chunk-F5XGK2DS.js?v=f528f50b:12219
commitPassiveMountEffects_complete @ chunk-F5XGK2DS.js?v=f528f50b:12191
commitPassiveMountEffects_begin @ chunk-F5XGK2DS.js?v=f528f50b:12181
commitPassiveMountEffects @ chunk-F5XGK2DS.js?v=f528f50b:12171
flushPassiveEffectsImpl @ chunk-F5XGK2DS.js?v=f528f50b:13939
flushPassiveEffects @ chunk-F5XGK2DS.js?v=f528f50b:13902
commitRootImpl @ chunk-F5XGK2DS.js?v=f528f50b:13871
commitRoot @ chunk-F5XGK2DS.js?v=f528f50b:13743
performSyncWorkOnRoot @ chunk-F5XGK2DS.js?v=f528f50b:13332
flushSyncCallbacks @ chunk-F5XGK2DS.js?v=f528f50b:2766
workLoop @ chunk-F5XGK2DS.js?v=f528f50b:274
flushWork @ chunk-F5XGK2DS.js?v=f528f50b:253
performWorkUntilDeadline @ chunk-F5XGK2DS.js?v=f528f50b:461
