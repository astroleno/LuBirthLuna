<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>出生点对齐测试</title>
    <style>
        body { 
            margin: 0; 
            padding: 20px; 
            font-family: Arial, sans-serif; 
            background: #f0f0f0;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-item {
            margin: 15px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .test-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }
        .coordinate-info {
            background: #e8f4f8;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .expected-result {
            background: #d4edda;
            color: #155724;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .actual-result {
            background: #f8d7da;
            color: #721c24;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .button {
            background: #007bff;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        .button:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>出生点对齐测试</h1>
        
        <div class="test-item">
            <div class="test-title">🎯 问题描述</div>
            <p>用户反馈：</p>
            <ul>
                <li>默认进入屏幕显示尼泊尔位于x=0.5位置</li>
                <li>点击对齐出生点后却对齐到美国中部，而不是预期的0,0位置</li>
            </ul>
        </div>

        <div class="test-item">
            <div class="test-title">🔍 问题分析</div>
            <div class="coordinate-info">
                <strong>坐标系统不一致问题：</strong><br>
                • 地球贴图系统：0° = 东经90°（亚洲/太平洋区域）<br>
                • 出生点计算系统：0° = 本初子午线（非洲/欧洲）<br>
                • 结果：存在180°的相位差
            </div>
        </div>

        <div class="test-item">
            <div class="test-title">🛠️ 修复方案</div>
            <p>已实施的修复：</p>
            <ul>
                <li>✅ 修改 <code>birthPointAlignment.ts</code>：经度偏移90度，使0°对应东经90°</li>
                <li>✅ 修改默认配置：出生点默认经度改为-90°（对应本初子午线）</li>
                <li>✅ 统一坐标系统，与地球贴图对齐</li>
            </ul>
        </div>

        <div class="test-item">
            <div class="test-title">🧪 测试用例</div>
            
            <div class="expected-result">
                <strong>预期结果：</strong><br>
                • 上海（东经121°）应该在屏幕右侧附近<br>
                • 本初子午线（0°）应该在屏幕左侧附近<br>
                • 美国中部（西经90°）应该在屏幕左侧更远的位置<br>
                • 对齐出生点后，目标位置应该准确显示在屏幕中心
            </div>

            <div class="coordinate-info">
                <strong>坐标转换说明：</strong><br>
                • 用户输入经度 → 系统内部计算：+90°偏移<br>
                • 东经90° = 系统内部0°<br>
                • 本初子午线（0°）= 系统内部-90°<br>
                • 西经90° = 系统内部-180°
            </div>
        </div>

        <div class="test-item">
            <div class="test-title">📝 验证步骤</div>
            <ol>
                <li>启动开发服务器：<code>npm run dev</code></li>
                <li>打开浏览器访问：<code>http://localhost:5173/</code></li>
                <li>观察默认显示：应该显示亚洲/太平洋区域</li>
                <li>设置出生点为上海（经度121°，纬度31°）</li>
                <li>启用出生点对齐功能</li>
                <li>点击对齐按钮，观察上海是否移动到屏幕中心</li>
                <li>测试其他位置：纽约（西经74°）、伦敦（0°）等</li>
            </ol>
        </div>

        <div class="test-item">
            <div class="test-title">🔧 调试信息</div>
            <p>在浏览器控制台中添加调试参数：</p>
            <code>?debug=1</code>
            <p>可以看到详细的坐标计算信息。</p>
        </div>

        <div class="test-item">
            <div class="test-title">📊 测试结果</div>
            <div id="test-results">
                <p>请按照上述步骤进行测试，然后记录结果：</p>
                <textarea id="results" style="width: 100%; height: 100px; margin: 10px 0;" 
                    placeholder="记录测试结果..."></textarea>
                <button class="button" onclick="saveResults()">保存结果</button>
            </div>
        </div>
    </div>

    <script>
        function saveResults() {
            const results = document.getElementById('results').value;
            if (results.trim()) {
                alert('测试结果已记录！\n\n' + results);
                console.log('测试结果：', results);
            } else {
                alert('请先输入测试结果');
            }
        }
        
        // 页面加载时的说明
        window.addEventListener('load', function() {
            console.log('出生点对齐测试页面已加载');
            console.log('请按照页面上的步骤进行测试');
        });
    </script>
</body>
</html>