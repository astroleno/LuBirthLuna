 高光贴图和高度贴图集成分析

  📊 现有资源分析

  已具备的贴图资源：
  - ✅ 法线贴图：8k_earth_normal_map.jpg/tif - 已配置加载
  - ✅ 高光贴图：8k_earth_specular_map.jpg/tif -
  已配置加载
  - ✅ 高度贴图：8k_earth_displacement_map.png -
  已存在但未配置
  - ✅ 云层法线贴图：8k_earth_clouds_normal.jpg - 新增资源

  🎯 当前实现状态

  Earth.tsx组件现状：
  - 仅使用基础颜色贴图（earthMap）
  - 着色器中有简单的高光计算，但未使用高光贴图
  - 未使用法线贴图进行表面细节增强
  - 未使用高度贴图进行地形置换

  🔧 技术集成可行性

  1. 高光贴图集成 ⭐⭐⭐⭐⭐ (强烈推荐)

  // 当前简单高光计算
  float specular = pow(max(dot(reflectDir, viewDir), 0.0),
   shininess);

  // 可改进为贴图驱动
  float specIntensity = texture2D(specularMap, uv).r;
  float specular = specIntensity * pow(max(dot(reflectDir,
   viewDir), 0.0), shininess);

  2. 法线贴图集成 ⭐⭐⭐⭐⭐ (强烈推荐)

  // 当前平坦表面
  vec3 normal = normalize(vNormalW);

  // 可改进为法线贴图
  vec3 normalMap = texture2D(normalMap, uv).rgb * 2.0 -
  1.0;
  vec3 normal = normalize(tangentMatrix * normalMap);

  3. 高度贴图集成 ⭐⭐⭐ (可选)

  // 顶点着色器中添加地形置换
  float height = texture2D(displacementMap, uv).r;
  vec3 displaced = position + normal * height *
  displacementScale;

  💡 建议的集成优先级

  🚀 第一阶段：法线贴图 + 高光贴图

  - 工作量：中等（需修改着色器）
  - 视觉效果：显著提升表面细节和真实感
  - 性能影响：轻微（增加2个纹理采样）

  🌟 第二阶段：高度贴图（可选）

  - 工作量：较高（需修改几何体生成）
  - 视觉效果：增加地形立体感
  - 性能影响：中等（顶点数量可能增加）

  ⚠️ 需要注意的问题

  1. 着色器复杂度

  - 当前Earth.tsx使用的是自定义ShaderMaterial
  - 需要确保新增贴图与现有光照系统兼容
  - 需要处理贴图坐标变换和极区修正

  2. 内存和性能

  - 8K贴图内存占用较大
  - 需要考虑低端设备的fallback机制
  - 可能需要实现LOD系统

  3. 现有架构兼容性

  - textureLoader.ts已经支持这些贴图类型
  - 需要修改Earth组件的uniform定义
  - 需要保持与现有参数系统的兼容性

  🎯 推荐实施策略

  立即可行：
  1. 集成法线贴图：在Earth.tsx中添加normalMap uniform
  2. 集成高光贴图：用贴图替代简单的高光计算
  3. 保持向后兼容：添加开关控制是否使用新贴图

  后续优化：
  1. 高度贴图置换：根据性能反馈决定是否添加
  2. 质量级别控制：支持2K/8K贴图动态切换
  3. 性能监控：添加帧率和内存使用监控

  总结：技术完全可行，建议优先集成法线贴图和高光贴图，这将
  显著提升地球表面的视觉真实感。