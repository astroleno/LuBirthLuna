**目标**
- 用可重复的自动化测试覆盖关键物理现象：南北半球昼夜、极昼/极夜、直射点东西向运动、夜面负高度角、天顶边界。

**实现位置**
- 入口：`src/astro/autoTests.ts` 导出 `runAutoTests()`。
- 触发：在 `src/main.tsx` 中解析 URL 参数 `?autotest=1` 自动执行一次；也可从控制台调用。

**测试用例**
- Equinox N/S day-night contrast：春分 UTC 12:00，(30°N,0°E) 与 (30°S,0°E) 高度角符号相反或数值对称。
- Arctic circle midnight sun：北极圈 66.6°N 夏至日 00/06/12/18 UTC，仰角均 ≥ 0（允许折射微负到 -0.5）。
- Subsolar east-to-west motion：春分赤道 0°N,0°E，06/12/18 UTC 方位角分别位于东/南/西象限。
- Night hemisphere negative altitude：南半球夜间样例，仰角 < 0（渲染层关灯依据）。
- Equinox noon near-zenith：赤道春分正午仰角 > 85°（方位角不强制）。

**执行与输出**
- 浏览器地址栏添加 `?autotest=1`，在控制台查看以 `[AutoTest]` 开头的逐项结果与 Summary。
- 返回结构：`{ passed, total, results[] }`，方便后续接入 UI/CI。

**与旧测试的差异**
- 移除旧的“快速/一致性/关键验证”按钮和脚本，避免与渲染交互耦合。
- 新方案用纯函数 `computeEphemeris` 做断言，避免 UI 状态干扰。

**已知限制**
- 真实时区与夏令时未引入（保留 `byLongitude` 用于演示）；不影响以上物理现象判定。
- 天顶附近方位角不稳定属数学特性，测试只验证仰角与象限归类。

**后续扩展建议**
- 增加“往返一致性”测试（Az/El ↔ ENU/ECEF）。
- 增加跨实现对比（astronomy-engine vs 本地实现），形成差值分布报告。
- 将 `runAutoTests()` 挂到一个隐藏 UI 开关或快捷键，便于产品演示与回归。

