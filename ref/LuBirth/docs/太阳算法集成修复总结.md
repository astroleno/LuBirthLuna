**变更概览**
- 世界坐标对齐：修正 ECEF(Z-up) → Three.js 世界(Y-up) 映射，恢复南北半球昼夜、极昼/极夜与直射点方向的物理一致性。
- 光照昼夜逻辑：在渲染层按真实高度角 `altDeg` 控制方向光强度与阴影（白天开启，夜晚关闭）。
- 移除旧测试：删除旧版“快速/一致性/关键验证”测试入口与脚本，避免与 UI/渲染耦合。
- 新自动测试：新增 `src/astro/autoTests.ts`，通过 `?autotest=1` 自动执行，覆盖关键物理现象。

**关键代码修改**
- `src/astro/ephemeris.ts`
  - `sunWorld`、`observerECEF`：从 ECEF 映射为世界坐标 `World(x,y,z) = ECEF(x,z,y)`。
- `src/scenes/simple/utils/lightingUtils.ts`
  - `useLightDirection(mode, sunWorld, composition, altDeg?)` 支持可选 `altDeg`，用于更准确的地平线判断。
- `src/SimpleTest.tsx`
  - `SceneContent` 传入 `altDeg={sunAngles.altDeg}`，`directionalLight` 使用 `altDeg` 控制 `intensity` 与 `castShadow`。
  - 移除旧的手动测试函数与按钮。
- `src/main.tsx`
  - 支持 `?autotest=1` 在启动时运行自动测试。
- 删除文件：`src/astro/quickTest.ts`。
- 新增文件：`src/astro/autoTests.ts`、`docs/自动化测试方案与结果摘要.md`。

**如何验证**
- 浏览器添加 `?autotest=1`，控制台查看以 `[AutoTest]` 开头的逐项结果与 Summary。
- 目视验证：
  - 北极圈 66.6°N 夏至日 00/06/12/18 UTC 均为白天（极昼）。
  - 赤道春分：06/12/18 UTC 方位角落在东/南/西象限，直射点从东向西逆时针移动（俯视北极）。
  - 南半球夜间：地球夜面不再被“转光到南半球”，而是由背后照亮，日夜分界线正确。

**注意事项**
- `toUTCFromLocal` 仍为演示用经度推时区；不影响核心物理现象。若需真实时区/夏令时，建议后续新增 IANA TZ 支持。
- 天顶附近方位角数学上不稳定；自动测试仅验证仰角阈值与象限分类。

**后续建议**
- 增加 ENU/ECEF 往返一致性与角↔向量↔角往返测试。
- 提供 IANA 时区/显式偏移接口与 UI 切换。
- 将自动测试接入 CI 或隐藏菜单，便于回归。

